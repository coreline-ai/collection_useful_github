PORT=4000

# Prefer DATABASE_URL for managed services.
# Example: postgresql://postgres:postgres@localhost:55432/useful_git_info
DATABASE_URL=

# Fallback fields when DATABASE_URL is empty
PGHOST=localhost
PGPORT=55432
PGUSER=postgres
PGPASSWORD=postgres
PGDATABASE=useful_git_info

# Set to "true" when SSL is required (managed DB)
PGSSL=false

# Comma separated allow list. Use * only for local dev.
CORS_ORIGIN=http://localhost:5173,http://localhost:5174

# API security headers
API_SECURITY_CSP=default-src 'none'; frame-ancestors 'none'; base-uri 'none'; form-action 'none'; connect-src 'self'

# YouTube Data API v3
YOUTUBE_API_KEY=
YOUTUBE_API_TIMEOUT_SECONDS=12
YOUTUBE_SUMMARY_ENABLED=true
YOUTUBE_SUMMARY_PROVIDER=glm
YOUTUBE_SUMMARY_TIMEOUT_SECONDS=30

# Bookmark metadata fetch guardrails
BOOKMARK_FETCH_TIMEOUT_MS=10000
BOOKMARK_MAX_RESPONSE_BYTES=1048576

# NotebookLM source linking (safe-disabled by default)
NOTEBOOKLM_ENABLED=false
NOTEBOOKLM_PROJECT_ID=
NOTEBOOKLM_LOCATION=global
NOTEBOOKLM_ENDPOINT_LOCATION=global
NOTEBOOKLM_NOTEBOOK_ID=
NOTEBOOKLM_SERVICE_ACCOUNT_JSON=

# GLM summary provider
GLM_API_KEY=
GLM_BASE_URL=https://api.z.ai/api/coding/paas/v4
GLM_MODEL=glm-4.7

# GitHub summary (manual regenerate with queue)
GITHUB_SUMMARY_ENABLED=true
GITHUB_SUMMARY_PROVIDER=glm
GITHUB_SUMMARY_TIMEOUT_SECONDS=30
GITHUB_SUMMARY_README_MAX_BYTES=8192
GITHUB_SUMMARY_PROMPT_VERSION=v1
GITHUB_SUMMARY_CACHE_TTL_SECONDS=604800
GITHUB_SUMMARY_MAX_ATTEMPTS=5
GITHUB_SUMMARY_STALE_LOCK_MS=120000
GITHUB_SUMMARY_WORKER_POLL_INTERVAL_MS=1500
GITHUB_SUMMARY_RECOVERY_INTERVAL_MS=30000

# Optional GitHub API auth/token for metadata/readme fetch
GITHUB_API_TOKEN=
GITHUB_API_TIMEOUT_SECONDS=12

# Protect dashboard/admin write endpoints
ADMIN_API_TOKEN=
# Guard against accidental large-card-loss writes on GitHub dashboard saves (0~1 ratio)
GITHUB_SAVE_MAX_DROP_RATIO=0.34

# Real User Monitoring (Web Vitals ingestion)
WEB_VITALS_ENABLED=false
WEB_VITALS_MAX_SAMPLES=500
WEB_VITALS_SUMMARY_DEFAULT_MINUTES=60
