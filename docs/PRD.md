# PRD: Unified Knowledge Cardboard

업데이트 기준: 2026-02-17

## 1. 제품 개요

개발자가 자주 참고하는 GitHub 저장소, YouTube 영상, 웹 문서를 한 곳에 카드보드 형태로 저장/분류/검색하는 멀티 보드 앱이다.

핵심 가치:

- 수집: URL 입력으로 빠르게 카드 생성
- 정리: 카테고리/창고 기반 관리
- 탐색: 보드별 조회 + 통합검색
- 안정성: PostgreSQL 우선 저장 + 자동 복구형 동기화

## 2. 타깃 사용자

- 기술 리서치를 장기 축적하는 개발자
- 오픈소스/영상/문서 레퍼런스를 정리하는 개인/소규모 팀

## 3. 제품 목표

- 보드별 독립 운영과 통합검색을 동시에 만족한다.
- 저장/동기화 장애 상황에서도 사용자 작업 유실을 최소화한다.
- 검색 정확도를 단순 문자열 매칭 이상으로 고도화한다.

## 4. 기능 요구사항

## 4.1 글로벌

- 최상단 메뉴: `통합검색 > 깃허브 > 유튜브 > 북마크`
- 마지막 선택 탭 localStorage 복원
- 테마: `light | dark` (저장값 우선, 없으면 OS 감지)
- 상단 우측 동기화 상태 배지 표시:
  - `정상 / 재시도 / 로컬전환 / 복구완료`
  - 마지막 성공 시간 표시

## 4.2 GitHub 보드

- 입력: `owner/repo`, `github.com/owner/repo`, `https://github.com/owner/repo`
- 카드: 이름/요약/언어/stars/forks/링크
- 상세 모달: `Overview / README / Activity`, 메모 입력/저장
- 수동 번역 버튼(개요/README/Activity)
- 메인 카테고리에서만 입력/검색 폼 표시
- 등록 카드 로컬 검색(검색 중 전체 카테고리 통합 대상)
- 요약 재생성:
  - 카드 하단 버튼 수동 트리거
  - GLM 기반 비동기 큐 처리
  - 성공 시 summary 교체, 실패 시 기존 summary 유지

## 4.3 YouTube 보드

- 입력 URL: `watch`, `youtu.be`, `shorts` (영상만)
- 카드: 썸네일/제목/채널/조회수/게시일/링크/요약 상태
- 요약:
  - GLM 기반 비동기 큐
  - 실패 시 카드 유지 + 재생성 버튼 제공
- NotebookLM:
  - 기본 `disabled-safe`
  - 활성화 시 source 연결 상태 필드 반영
- 상세 모달 미제공(카드 중심 UX)

## 4.4 Bookmark 보드

- 입력 URL: `http/https`만 허용
- 서버 메타 추출 후 카드 생성, 실패 시 fallback 카드 생성
- 카드: 제목/본문(요약 또는 excerpt)/도메인/링크/추가일
- 중복 정리 도우미 제공(그룹 병합)
- 링크 상태 점검 API 연동
- 요약 재생성:
  - 카드 하단 버튼 수동 트리거
  - GLM 기반 비동기 큐
  - 성공 시 카드 본문을 `summaryText`로 전환
  - 실패 시 기존 excerpt 유지
- 상세 모달 미제공

## 4.5 카테고리 정책 (보드 공통)

- 기본 카테고리: `main(메인)`, `warehouse(창고)`
- 메인에서만 추가 입력폼 노출
- 사용자 카테고리 생성/이름변경/삭제
- 기본 카테고리 삭제 불가(이름변경 가능)
- 카드는 단일 카테고리 소속
- 카테고리 삭제 시 카드 자동 창고 이동

## 4.6 리스트/페이지네이션

- 데스크톱 4열
- 페이지당 12개
- 검색어 변경 시 페이지 1로 리셋

## 4.7 통합검색

- 검색 대상: PostgreSQL `unified_items`
- 필터: provider/type
- 최근검색: 최대 20개
- 백업 내보내기/복원(JSON)
- 검색 결과는 관련도 점수 기반 정렬

## 5. 비기능 요구사항

- 장애 내성:
  - 원격 저장 실패 시 재시도 후 로컬 전환
  - 복구 성공 시 자동 정상화
- 보안:
  - README/마크다운 렌더 XSS 방어
  - 북마크 메타 추출 SSRF 방어
- 성능:
  - 통합검색 응답 지연 최소화(인덱스 + 캐시)
  - 대량 카드에서도 페이지네이션 UX 유지

## 6. 성공 기준 (Acceptance)

- 보드별 핵심 플로우(추가/이동/삭제/검색/복원) 안정 동작
- 요약 재생성(GitHub/YouTube/Bookmark) 모두 정상 동작
- 원격 장애 상황에서도 데이터 유실 없이 작업 지속 가능
- `npm run lint`, `npm test`, `npm run build`, `npm run test:e2e:postgres` 통과

## 7. 제외 범위

- 사용자 계정/권한/멀티테넌트
- 다중 사용자 실시간 협업
- YouTube 채널/플레이리스트 수집
- 북마크 수동 본문 편집기
